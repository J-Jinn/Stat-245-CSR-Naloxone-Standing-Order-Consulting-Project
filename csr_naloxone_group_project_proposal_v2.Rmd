---
title: 'Project Proposal Revised - CSR Naloxone'
author: 'STAT 245, Fall 2020 (Group Members: Nana Ama Baidoo, Alex Visser, Joshua Ridder, Joseph Jinn)'
date: '`r format(Sys.Date(), "%B %d, %Y")`'
output:
  html_document:
    fig_height: 4
    fig_width: 6.5
    df_print: paged
  pdf_document:
    fig_height: 4
    fig_width: 6.5
classoption: portrait
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
require(ggformula)
require(mosaic)
require(fastR2)
require(tidyverse)
require(s245)
```

Resources:

[R-Markdown Lists](https://pandoc.org/MANUAL.html#block-content-in-list-items)

___
___

## 1. Project Partner

Project Partner: Calvin University - The Center for Social Research 

>*We conduct social-scientific research projects, taking data from collection to reporting, through focus groups, statistical analyses, program evaluations, maps, interactive data visualizations, surveys and more.*

>*The Center conducts and collaborates on several large research projects and several dozen smaller projects annually for academic, public-sector, nonprofit, religious, and business organizations.*

Cited from: [CSR](https://calvin.edu/centers-institutes/center-for-social-research/)


Project Contacts:

* Keila Pieters: krp28@calvin.edu

* Laura Luchies: lbl7@calvin.edu


Project Name: **Center for Social Research - Naloxone Standing Order Project - CDC WONDER Data Project**

Project Description:

>"The Center for Social Research is working on evaluating Michigan’s state-wide naloxone standing order. Naloxone is a drug that reverses opioid overdose. An opioid can be a prescription opioid for pain like oxycodone or morphine or non-prescription like heroin.

>The standing order evaluation is part of the larger MODA (Michigan overdose data to action) initiative to combat the opioid epidemic. The US is currently considered to be in the third wave of the opioid epidemic (read more about the opioid epidemic at https://www.cdc.gov/drugoverdose/epidemic/index.html).

>So far, we have conducted interviews and focus groups with key people from a variety of fields who have experience with the standing order, opioid use disorder, recovery, harm reduction, etc. Through these interviews and focus groups, we have identified several key outcomes or goals the standing order should be accomplishing." 

Cited from: Documentation provided by Keila Pieters (STAT 2020 fall info and research questions 20200824.docx).

Available In: 

[GitHub Respository - Joseph Jinn:](https://github.com/J-Jinn/Stat-245-CSR-Naloxone-Standing-Order-Consulting-Project)


___
___

## 2. Goals and Deliverables

### Research Question(s):

* Trends in overdose deaths in Kent County compared to other counties including but not limited to:
  
  + Wayne

  + Ingham

  + Macomb

  + Washtenaw

* Do numbers seem to be increasing, decreasing, or staying the same after 2017? (Consider creating a map and tracking it over time.)

* Does gender, age, or race seem to have an effect on overdose rate? (Consider using metropolitan area as another variable.)

* Compare cause of death including narcotics to non-narcotics. Has one increased as the other decreased over time? Have both increased/decreased?

* Anything else you find interesting!

*Cited from: Documentation provided by Keila Pieters.*

___
___

### **Instructor Feedback - Items to Revise/Consider:**

>I'm not sure what you mean by "trends" in overdoses -- does this mean over time? By year, or month (at what time-scale)? Is it the number of overdoses, or the "rate" of overdoses? If it's a rate, what is the "denominator" of the calculation -- is it the population of a given county, or some smaller population (a certain age group, or group of people who meet some specific criteria)?

>I'm not sure quite what you mean by "creating a map and tracking it over time". Is "it" always overdoses? Are you able to give more specific details about how you would want it to look/work -- animated, or some other way of showing time progression?

>I agree that looking at demographic information like age, gender, race in relation to overdoses is of interest. But do you have an idea yet of how the data will be set up to allow this? Is the data you have on overdoses specifically (like, one row of the dataset for each person reported to have overdosed)? Or, is it aggregated in some way?  In other words: do you expect to model counts/rates of overdose (count regression), or probability of overdose (logistic regression)? I think it is counts/rates, because we want to model the rates of overdose deaths over time rather than the probability that if someone dies, it's because of an overdose...but I could be wrong.

>Many of the questions in the list seem like sub-questions drilling down on one main question/model: what factors predict the [number of deaths, crude death rates or age-adjusted death rates -- not sure which you will use?] And the predictors of interest are County, time (annual or monthly totals?), gender, age, race, metro area (maybe), cause of death. If this is the case, then when you have the data, you will probably need to make sure it's in a form where there is one row per unique combination of predictors (County, time, gender, etc.).

>Your list of deliverables is admirably specific, but the big picture is not too clear to me. I see you proposing to provide code to process and prepare data and create figures, and also share the resulting figures either via a web app or as images. (You can use D3 if your team has the skills and wants to do something that can't be done in R - let's talk about the plan/design before you do too much work on it to make sure it is worth it!) But exactly what "analysis" will be done is not as clear. Is graphical exploration of the data the main intent, or is the statistical modelling also a high priority for CSR? Do they agree that a written report is the preferred format for your final products, or would a presentation or some other format be better?

___
___

### Deliverables:

* Dataset(s) containing all variables of interest:
  + CSV file format - cleaned and tidy.
  + Essentially extract and JOIN disparate subsets of the whole data-set together due to limitations of initial data extraction from CDC website.
+ CSV format, in all likelihood.

* Data visualizations displaying any trends found in "night science" exploration of the data-set(s).
+ Probably R-based plots using R packages (some thoughts using D3.js to construct web app-based graphs - Joseph Jinn)
+ knit-to-PDF/HTML or individual PNG's.

* R-Markdown file containing all analysis code and written report detailing the analysis.
+ PDF/HTML version after knitting.

* GitHub repository containing all work done (tentative, if we decide to use version control).
+ If this route is chosen, all deliverables above will also be contained in the repository except possibly excluding data-set(s) (file size dependent) and image files (file size dependent).
+ Possibly store large data-set(s) and iamge files in OneDrive, Google Drive, Dropbox, etc., and share via links.

* More T.B.D.
+ ...
+ ...


___
___

## 3. Data

**Note: Refer to csr_naloxone_tidy_dataset.Rmd for further details**

Primary Data Source - Aggregate Data Queries From: 

1. [CDC Wonder](https://wonder.cdc.gov/ucd-icd10.html)

Secondary Data Sources - Aggregate Data Statistics From:

1. [VSSR Dataset](https://www.cdc.gov/nchs/nvss/vsrr/drug-overdose-data.htm)
2. [2018 Drug Overdose Death Rates](https://www.cdc.gov/drugoverdose/data/statedeaths/drug-overdose-death-2018.html)


The CDC website provides a GUI/dashboard by which you can perform queries to obtain aggregate statistics based on various criteria.

*Unfortunately, there is no way to obtain the actual data in terms of individual observations/rows - only aggregate statistics from queries.*

Format: flat text file --> parse in R-Studio --> store in tibble/dataframe --> export to CSV --> read_csv() + analysis

___
___

## 4. Data Prep

Initial task is to obtain aggregate data statistics from the CDC Wonder website and explore each before determining the exact form of the data we need for the analysis.


GROUP BY:

*	State
*	County (Kent county especially)
*	Drug/Alcohol Induced Cause 
*	Cause of death (search for keyword “narcotics”)
*	Gender
*	Race
*	Age

Filters:

* States (Michigan specially)
* Years (2012-2018)
  + Option to export years individually if you want one more level of detail.
* Counties - Kent, others.
  + Option to export counties individually if you want one more level of detail

Cited from: Documentation provided by Keila Pieters.

___

**Note: Refer to csr_naloxone_tidy_dataset.Rmd for further details**

*The following section is an excerpt from the file mentioned above:*

#### Some Logistics for the Project:

We should probably have some kind of naming procedures for the CSV files we create from the flat text files exported from our queries from the CDC Wonder Data site.

Currently, my naming convention has become:

CDC_GROUPBY_Group1_Group2_GroupN_2012_2018_ADDITIONAL_IDENTIFIERS_HERE.csv

(i.e. CDC_GROUPBY_County_Race_2012_2018_DrugAlcoholCauses.csv)

where Group1, Group2,...,GroupN, represents the variables we are grouping by.

I'm basically specifying the structure of my query according to the different sections on the query "request form" page so that I can later identify how I created the query.  Of course, the file-name could become prohibitively long but I prefer to be able to keep track of all the different files we will accumulate rather than have generic names that don't identify at all what their contents are, which could make for analytic difficulties further on.

In addition, I am using my browser to print-to-pdf the entire "request form" tab so that I know exactly how to reproduce the query for a specific dataset file if it becomes necessary.

Currently, the naming convention for the PDF print-outs of the queries is:

Underlying Cause of Death, 1999-2018 Request Form for INSERT_NAME_OF_CSV_FILE_HERE.csv.PDF

(i.e. Underlying Cause of Death, 1999-2018 Request Form for CDC_GROUPBY_County_Race_2012_2018_DrugAlcoholCauses.csv.PDF)

So, it's basically the same static header at the beginning with the word 'for' and a copy/paste of the name of the CSV file attached with .csv and file extension .pdf.

*Eventually, we'll also probably want to break up this .Rmd into individual discrete files according to some criteria or another rather than have one super-long meta file, if we continue adding content.*

**Note: We should avoid calculating totals for columns when querying.  That is easy enough to do in R if we need column totals.  Thus, don't check the "show totals" options at the bottom of the "request form" tab.**

![CDC Wonder Data Request Form Section 7](images/CDCWonderData-RequestForm-Section7.PNG)

Other considerations:

* Set to 5 or less digits of precision in section 7 - other options.

* For "measures" in section 1, I am currently including all the "for crude rates" check-boxes, along with "age adjusted rate" and "percent of total deaths".  Could be useful...or not.

![CDC Wonder Data Request Form Section 1](images/CDCWonderData-RequestForm-Section1.PNG)

* Convert "char" types to "factor" types if it makes sense to do so (categorical variable).

* Re-level the levels in a categorical variable if a certain order makes sense (if categories are ordinal in nature).

* Re-name variables that have spaces, start with numbers, etc., as they are a pain to work with.

* Could consider using the 'reticulate' package to interface between R/Python and run code chunks in R-Studio for both languages.  Leverage the strengths of both languages.  This could be useful as I know I can write a flat text file parser in Python for our queries.**

**Note2: Current file-paths are relative and should work assuming root project directory contains this .Rmd file.  Avoid hard-coding absolute paths as that means it will only work locally on your own system.**


___
___

## 5. Background

* Medline Plus Video (offers explanation of how Naloxone saves lives)
  + [Youtube - National LIbrary of Medicine](https://www.youtube.com/watch?v=cssRZEI9ujY&feature=youtu.be)

* CDC Website:
  + [Help - Main Page](https://wonder.cdc.gov/wonder/help/main.html)
  + [Help - FAQ](https://wonder.cdc.gov/wonder/help/faq.html)
  + [CDC - About Opioid Epidemic](https://www.cdc.gov/drugoverdose/epidemic/index.html)


* Hekman LIbrary:

**Note: Not sure if you have to be signed into your account to view the link.**

  + [The Opioid Crisis: A Reference Handbook - David E. Newton](https://ebookcentral-proquest-com.lib-proxy.calvin.edu/lib/calvin/detail.action?docID=5446858)

___

### **Instructor Feedback - Items to Revise/Consider:**

>It would be great if you were able to find some resources from government, NGOs, or academic sources that examine trends in overdoses over time, either in Michigan or in other locations. Or, other academic or other analyses of the WONDER data. How have other people looked at the same questions you are trying to address, and what have they found and concluded?  The general background that you have identified about the opioid epidemic and the WONDER data are an excellent place to start to give broader context. If you haven't already, I would suggest asking Laura if she has any suggestions of specific resources/reports/videos/publications that she recommends and thinks you should be familiar with.

**Note 2: Ask project partner/contacts for suggested additional resources.**

___
___

## 6. Current Skills 

**Nana Ama Baidoo**

* Tableau
* Excel
* Python (very basic)
* R (basic)
* Microsoft Office applications
* Organization
* Open-minded & Understanding

**Alex Visser**

* Excel
* Python
* Organization
* Communication
* R (Basic)
* Time management
* Creativity

**Joshua Ridder**

* Python/C++/C#
* R (basic)
* Excel/Word/Powerpoint
* GitHub
* Discord/Slack/Teams

**Joseph Jinn**

* Python/R/T-SQL (basic familiarity)
* Javascript, HTML, CSS (basic familiarity)
* D3.js (very basic familiarity)
* KNime (very basic familiarity)
* GitHub/GitFlow, SourceTree - frontend for Git (version control tools)
* PyCharm, PHPStorm, R-Studio (IDE's)
* VS Code, Notepad++ (text editors)
* Adobe Photoshop, InDesign (probably not relevant)
* Microsoft Word, Excel, PowerPoint, Outlook
* Modo, Zbrush, Substance Painter (3D Modeling - irrelevant)
* Unreal Engine 4 (basic familiarity - irrelevant)
* Discord, Slack, M$ Teams (communication platforms)
* Windows 10 OS (please don't ask me to work on MacOS or Linux)
* VSCode (text editor)
* SQL Server 2019 (very basic familiarity)
* Trello (project management tool - task assignment/priority/etc.)
* Caffeine


___
___

## 7. Work plan

Talk with your group about how you think you will work best. Will you divide tasks and then hold meetings to report on progress, or hold more frequent meetings to work collaboratively?  Do certain group members want to take the lead on certain tasks? What times will work for meetings outside class time, if they are needed? Just spend a little time thinking about how you will coordinate effort for the project, and write a brief summary of your initial plans.


#### Initial Plans:

* Initial plan to work on this project proposal.
* Next step is to download the data subsets and explore them in R, which will probably include some data wrangling and manipulation (and general "night science" EDA).
* Most likely team and partner meetings will remain purely virtual in nature via e-mail, Teams, etc.
* Schedule coordination will probably be a big hassle in synchronously working together, so we believe asynchronous work will be the modus operandi.
* Will schedule meeting(s) with project partner(s) as deemed necessary in order to obtain feedback as to current progress.

#### Updated Plans:

* We are working completely asynchronously at the moment (no real-time collaboration outside of assigned time in-class)
  + Continue aggregate data queries individually and exploring the data after parsing into R.
  + Upload aggregate data queries in "datasets" folder, with suggested naming scheme in the tidy dataset .Rmd under individual folders labeled by group member name.
* Suggest reporting to group members/instructor via Microsoft Teams and/or E-mail for progress updates.
  + This includes uploads to shared project directory, modifications to shared project files, etc.
* Suggest scheduling further group and project partner meetings via M$ Teams for real-time coordination and progress updates.
  + Synchronous scheduling could be difficult based on everyone's availability or lack thereof...
* Etc.

___
___

## 8. Requests

>Free and unlimited supply of caffeinated products.

* On a more serious note, probably occasional coding assistance in R.

* I (Joseph Jinn) am keeping my own copies of project files in a personal GitHub Repository for my own edification (and just in case).

* Petition R-Studio developers to fix shared project bug mentioned earlier.

* Pray that I can find a job in the current COVID-19 pandemic and job market...

___
___

